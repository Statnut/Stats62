<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hockey Stat Sheet</title>

<style>
body { font-family: system-ui; margin: 0; background:#f4f4f4; }
nav { display:flex; background:#111; color:white; }
nav button { flex:1; padding:12px; border:none; background:none; color:white; }
nav button.active { background:#333; }
section { display:none; padding:12px; }
section.active { display:block; }
input, select, button, textarea { margin:4px 0; padding:6px; }
button:disabled { opacity:0.5; }
.box { background:#fff; padding:10px; border-radius:6px; margin-bottom:12px; }
table { width:100%; border-collapse:collapse; }
th, td { border-bottom:1px solid #ddd; padding:6px; text-align:left; }
th { background:#eee; }
#clock { font-size:28px; }
</style>
</head>

<body>

<nav>
  <button data-tab="game" class="active">Game</button>
  <button data-tab="boxscore">Box Score</button>
</nav>

<section id="game" class="active">
  <h2 id="gameStatus">Period 1</h2>

  <div class="box">
    <div id="clock">20:00</div>
    <button id="clockToggle">Start / Stop</button>
    <button id="advancePeriod">Advance Period</button>
    <button id="endGame">End Game</button>
  </div>

  <div class="box">
    <h3>Game Notes</h3>
    <textarea id="gameNotes"></textarea>
  </div>

  <div class="box">
    <h3>Scoring / Stats</h3>
    <button id="recordGoal">Record Goal</button>
    <button id="recordShot">Record Shot</button>
    <button id="recordPenalty">Record Penalty</button>
    <button id="recordFO">Record Faceoff</button>
  </div>

  <div class="box" id="eventLog"></div>
</section>

<section id="boxscore">
  <h2 id="finalLabel"></h2>

  <button id="finalizeBtn">Finalize Box Score</button>

  <div class="box">
    <h3>Final Score</h3>
    <div id="finalScore"></div>
  </div>

  <div class="box">
    <h3>Notes</h3>
    <div id="boxNotes" style="white-space:pre-wrap;"></div>
  </div>
</section>

<script>
const $ = id => document.getElementById(id);

const game = {
  period: 1,
  clock: 1200,
  running: false,
  isFinal: false,
  score: { home:0, away:0 },
  notes: ''
};

/* Tabs */
document.querySelectorAll('nav button').forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll('nav button').forEach(x=>x.classList.remove('active'));
    document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
    b.classList.add('active');
    $(b.dataset.tab).classList.add('active');
    if(b.dataset.tab==='boxscore')renderBoxScore();
  };
});

/* Clock */
function renderClock(){
  const m=Math.floor(game.clock/60).toString().padStart(2,'0');
  const s=(game.clock%60).toString().padStart(2,'0');
  clock.textContent=`${m}:${s}`;
}
clockToggle.onclick=()=>{
  if(game.isFinal)return;
  game.running=!game.running;
  if(game.running){
    game.timer=setInterval(()=>{
      if(game.clock>0){game.clock--;renderClock();}
    },1000);
  } else clearInterval(game.timer);
};

/* Period */
advancePeriod.onclick=()=>{
  if(game.isFinal)return;
  if(game.period===3){
    game.period=4;
    gameStatus.textContent='Overtime';
    game.clock=300;
  } else {
    game.period++;
    gameStatus.textContent=`Period ${game.period}`;
    game.clock=1200;
  }
  renderClock();
};

/* Manual End */
endGame.onclick=()=>{
  if(game.isFinal)return;
  finalizeGame();
};

/* Record stubs (locked by finalize) */
recordGoal.onclick=()=>{ if(!game.isFinal)eventLog.innerHTML+='Goal recorded<br>'; };
recordShot.onclick=()=>{ if(!game.isFinal)eventLog.innerHTML+='Shot recorded<br>'; };
recordPenalty.onclick=()=>{ if(!game.isFinal)eventLog.innerHTML+='Penalty recorded<br>'; };
recordFO.onclick=()=>{ if(!game.isFinal)eventLog.innerHTML+='Faceoff recorded<br>'; };

/* Finalize */
finalizeBtn.onclick=finalizeGame;

function finalizeGame(){
  game.isFinal=true;
  clearInterval(game.timer);
  game.notes=gameNotes.value;

  clockToggle.disabled=true;
  advancePeriod.disabled=true;
  endGame.disabled=true;
  recordGoal.disabled=true;
  recordShot.disabled=true;
  recordPenalty.disabled=true;
  recordFO.disabled=true;
  gameNotes.disabled=true;
  finalizeBtn.style.display='none';

  gameStatus.textContent='FINAL';
  finalLabel.textContent='FINAL';
}

/* Box Score */
function renderBoxScore(){
  finalScore.textContent=`Home ${game.score.home} — Away ${game.score.away}`;
  boxNotes.textContent=game.notes || '—';
}
renderClock();
</script>

</body>
</html>